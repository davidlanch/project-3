(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){},75:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),i=n(44),c=n.n(i),r=(n(53),n(54),n(6)),o=n(4),l=n.n(o),u=n(8),d=n(5),j=(n(56),n(45)),p=n.n(j).a.create({baseURL:"https://the-real-bon-app.herokuapp.com",withCredentials:!0}),h=n(2),b=n(9),m=n(0),f=s.a.createContext(),O=function(e){var t=Object(a.useState)(null),n=Object(d.a)(t,2),s=n[0],i=n[1],c=Object(a.useState)(!0),r=Object(d.a)(c,2),o=r[0],l=r[1];Object(a.useEffect)((function(){p.get("/is-loggedin").then((function(e){l(!1),i(e.data.currentUser)})).catch((function(){i(null),l(!1)}))}),[]);var u=Boolean(s);return Object(m.jsx)(f.Provider,{value:{currentUser:s,isLoading:o,isLoggedIn:u,setCurrentUser:i},children:o?null:e.children})},g=function(e){return function(t){return Object(m.jsx)(f.Consumer,{children:function(n){return Object(m.jsx)(e,Object(b.a)(Object(b.a)({},t),{},{userContext:n}))}})}},x=function(){return Object(a.useContext)(f)},v=n(10),y=n(11),N=n(13),C=n(12),k=(n(75),function(e){Object(N.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={message:"",date:Date.now(),recipe:e.props.idRecipe,comments:[],didMount:!1},e.updateComments=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.get("/comments/"+e.props.recipeId);case 3:n=t.sent,e.setState({comments:n.data,didMount:!0}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.handleChange=function(t){e.setState({message:t.target.value})},e.handleSubmit=function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,p.post("/comments/"+e.props.userId+"/"+e.props.recipeId,e.state);case 4:e.updateComments(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.updateComments();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.didMount?Object(m.jsxs)("div",{className:"comments",children:[Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)("h1",{className:"title",children:"Leave a comment"}),Object(m.jsxs)("form",{action:"",children:[Object(m.jsx)("input",{type:"text",className:"input",placeholder:"leave a comment here ..",onChange:this.handleChange}),!0===this.props.userContext.isLoggedIn&&Object(m.jsx)("button",{onClick:this.handleSubmit,children:"send !"}),!1===this.props.userContext.isLoggedIn&&Object(m.jsx)(h.b,{to:"/sign-in",children:Object(m.jsx)("button",{className:"btn",children:"send !"})})]})]}),this.state.comments.length?this.state.comments.map((function(e,t){var n,a;return Object(m.jsxs)("div",{className:"comment",children:[Object(m.jsxs)("div",{className:"date",children:[e.date.slice(0,10)," ",e.date.slice(11,19)," "]}),Object(m.jsxs)("div",{className:"author-infos",children:[Object(m.jsx)("img",{className:"avatar",src:null===(n=e.author)||void 0===n?void 0:n.avatar,alt:"user-avatar"}),Object(m.jsx)("b",{children:null===(a=e.author)||void 0===a?void 0:a.username})]}),Object(m.jsx)("div",{className:"message",children:Object(m.jsx)("div",{children:e.message})})]},e._id)})):Object(m.jsx)("div",{className:"comment",children:" no comments yet "})]}):Object(m.jsx)("div",{children:"loading"})}}]),n}(a.Component)),w=g(k),S=n(7),I=(n(83),function(e){var t=Object(a.useState)(0),n=Object(d.a)(t,2),s=n[0],i=n[1],c=Object(a.useState)(0),r=Object(d.a)(c,2),o=r[0],l=r[1];return Object(m.jsx)("div",{className:"star-rating",children:Object(S.a)(Array(5)).map((function(e,t){return t+=1,Object(m.jsx)("button",{type:"button",className:t<=(o||s)?"on":"off",onClick:function(){return i(t)},onMouseEnter:function(){return l(t)},onMouseLeave:function(){return l(s)},children:Object(m.jsx)("span",{className:"star",children:"\u2605"})},t)}))})}),F=(n(84),n(14)),q=n(15);function D(e){var t=x(),n=t.currentUser,s=t.setCurrentUser,i=Object(a.useState)(!1),c=Object(d.a)(i,2),r=c[0],o=c[1];Object(a.useEffect)((function(){var t=null===n||void 0===n?void 0:n.favorites.includes(e.id);o(t)}),[n]);var l=function(){!0===r?j():u()},u=function(){p.get("/all-recipes/add-to-favorite/"+n._id+"/"+e.id).then((function(e){Object(S.a)(n.favorites);var t=e.data.favorites;s(Object(b.a)(Object(b.a)({},n),{},{favorites:t}))})).catch((function(e){return console.error(e)}))},j=function(){p.get("/all-recipes/remove-from-favorite/"+n._id+"/"+e.id).then((function(t){e.handler&&e.handler();var a=t.data.favorites;s(Object(b.a)(Object(b.a)({},n),{},{favorites:a}))})).catch((function(e){return console.error(e)}))};return Object(m.jsx)("div",{children:r?Object(m.jsxs)("button",{className:"isFavorite",onClick:l,children:[Object(m.jsx)(F.a,{className:"coeur-plein",icon:q.b,size:"2x",color:"#d18110"}),Object(m.jsx)("i",{className:"far fa-heart coeur-vide fa-2x"})]}):Object(m.jsxs)("button",{className:"isNotFavorite",onClick:l,children:[Object(m.jsx)(F.a,{className:"coeur-plein",icon:q.b,size:"2x",color:"#d18110"}),Object(m.jsx)("i",{className:"far fa-heart coeur-vide fa-2x"})]})})}var M=function(e){var t,n,s,i,c=Object(a.useState)([]),r=Object(d.a)(c,2),o=r[0],j=r[1],b=new RegExp(/[0-9]+\./,"g"),f=new RegExp(/\.\s/,"g"),O=x().currentUser;Object(a.useEffect)((function(){g()}),[]);var g=function(){var t=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.get("/all-recipes/"+e.match.params.id);case 3:n=t.sent,j(n.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[(null===(t=e.location.state)||void 0===t?void 0:t.showLinks)&&Object(m.jsxs)("div",{className:"back-links-container",children:[Object(m.jsx)(h.b,{to:"./",className:"back-links",children:"Back to all recipes"}),Object(m.jsx)(h.b,{to:{pathname:"/all-recipes",searchFromOneRecipe:e.location.state},className:"back-links",children:"Back to my search"})]}),Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"shadow-drop-2-center wrapper",children:[Object(m.jsxs)("div",{className:"favorite",children:[O&&Object(m.jsx)(D,{id:e.match.params.id}),!O&&Object(m.jsxs)(h.b,{to:"/sign-in",className:"isNotFavorite",children:[Object(m.jsx)("i",{class:"fas fa-heart coeur-plein fa-3x"}),Object(m.jsx)("i",{className:"far fa-heart coeur-vide fa-3x"})]})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("img",{src:o.image,alt:o.title}),Object(m.jsx)("h1",{children:o.title}),Object(m.jsx)(I,{infoRecipe:e})]}),Object(m.jsxs)("h2",{className:"difficulties",children:["Level: ",o.difficulty]}),Object(m.jsx)("div",{className:"wrapper-ingredients",children:null===(n=o.ingredients)||void 0===n?void 0:n.map((function(e,t){return Object(m.jsxs)("div",{className:"wrapp-ingredient shadow-drop-2-center ",children:[Object(m.jsx)("h3",{children:e}),Object(m.jsx)("img",{src:"https://themealdb.com/images/ingredients/"+e+".png",width:"40px"}),Object(m.jsx)("p",{children:o.quantities[t]})]},t)}))}),Object(m.jsxs)("div",{className:"instructions-list",children:[b.test(o.instructions),Object(m.jsx)("ul",{children:b.test(o.instructions)?null===(s=o.instructions)||void 0===s?void 0:s.split(b).map((function(e){return Object(m.jsx)("li",{children:e})})):null===(i=o.instructions)||void 0===i?void 0:i.split(f).map((function(e){return Object(m.jsx)("li",{children:e})}))})]}),Object(m.jsx)("div",{className:"comment-section",children:Object(m.jsx)(w,{userId:null===O||void 0===O?void 0:O._id,recipeId:e.match.params.id})})]})})]})};n(39);function L(){return Object(m.jsxs)("div",{className:"signin",children:[Object(m.jsx)(F.a,{icon:q.f,className:"fa"}),Object(m.jsx)("p",{children:"Connexion"})]})}n(87),n(88),n(89);var U=Object(r.g)((function(e){var t=x().setCurrentUser;return Object(m.jsx)(F.a,{onClick:function(){return p.post("/signout").finally((function(){t(null)}))},className:"link icon-signout is-clickable",icon:q.c,size:"xs",title:"signout"})})),B=function(e){Object(N.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={showProfileMenu:!0},e.toggleProfileMenu=function(){e.setState({showProfileMenu:!e.state.showProfileMenu})},e}return Object(y.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsx)("div",{className:"connected-menu",children:Object(m.jsxs)("div",{className:"signin",onClick:function(){return e.toggleProfileMenu()},children:[Object(m.jsx)("img",{src:this.props.avatar,alt:"avatar",className:"img-avatar"}),Object(m.jsx)("p",{children:this.props.username}),Object(m.jsx)(F.a,{icon:q.d,className:"fa"}),!this.state.showProfileMenu&&Object(m.jsxs)("div",{className:"hidden-menu",children:[Object(m.jsx)(h.b,{className:"link",to:"/profile/my-recipes",children:"My recipes"}),Object(m.jsx)(h.b,{className:"link",to:"/profile/my-favourites",children:"My favourites"}),Object(m.jsx)(U,{className:"link signin"})]})]})})}}]),n}(a.Component);function P(){var e=x().isLoggedIn,t=x().currentUser;return Object(m.jsxs)("nav",{id:"nav_main",className:"nav",children:[Object(m.jsxs)(h.c,{exact:!0,className:"link logo",activeClassName:"is-active",to:"/",children:[Object(m.jsx)("img",{className:"logo-fridge",src:"./../../FridgeIcon.png",alt:"fridge-logo"}),Object(m.jsx)("img",{className:"title-logo",src:"./../../title-bon-app.png",alt:"bon-app"})]}),Object(m.jsx)(h.c,{className:"link title",activeClassName:"is-active",to:{pathname:"/all-recipes",reset:!0},children:"All Recipes"}),!1===e&&Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(h.c,{className:"link signin",activeClassName:"is-active",to:"/sign-in",children:Object(m.jsx)(L,{})})}),!0===e&&Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(B,{username:t.username,avatar:t.avatar})})]})}function _(){return Object(m.jsxs)("div",{className:"not-found",children:[Object(m.jsx)("h1",{className:"title",children:"404"}),Object(m.jsx)("span",{children:"Oh no !!!"}),Object(m.jsx)("span",{children:"You seem lost friend :("}),Object(m.jsxs)("span",{children:["Go back to the \xa0",Object(m.jsx)(h.b,{to:"/",children:"home page"})]})]})}n(40);var E=Object(r.g)((function(e){var t=Object(a.useState)((null===e||void 0===e?void 0:e.ingredientsFromHome)||(null===e||void 0===e?void 0:e.ingredientsFromState)||[""]),n=Object(d.a)(t,2),s=n[0],i=n[1];return Object(a.useEffect)((function(){"function"===typeof e.onIngredientInput&&(e.onIngredientInput(s),console.log("i am in use effect and the ingredients are: ",s),(null===e||void 0===e?void 0:e.reset)&&(console.log("reset got to useeffect in searchingredient"),i(e.ingredientsFromState)))}),[s]),Object(m.jsx)("div",{children:Object(m.jsxs)("form",{children:[s.map((function(e,t){return Object(m.jsxs)("div",{className:"one-ingredient",children:[Object(m.jsx)("img",{className:"ingredient-image",src:"https://themealdb.com/images/ingredients/"+s[t]+".png",alt:""}),Object(m.jsx)("input",{className:"add-ingredient",type:"text",value:s[t],onChange:function(e){return function(e,t){console.log("yep smtg definitely changed");var n=Object(S.a)(s);n[t]=e.target.value,console.log("and the new ingredients are...",n),i(n)}(e,t)}}),s.length>0&&Object(m.jsx)("button",{className:"ingredient-delete",onClick:function(e){return function(e,t){e.preventDefault();var n=Object(S.a)(s);n.splice(t,1),i(n)}(e,t)},children:Object(m.jsx)("i",{className:"fas fa-trash-alt"})}),Object(m.jsx)("br",{})]},t)})),s.length<5&&Object(m.jsx)("button",{className:"ingredient-add-button",onClick:function(e){e.preventDefault(),i([].concat(Object(S.a)(s),[""]))},children:Object(m.jsx)("i",{className:"fas fa-plus-circle"})})]})})}));n(90);function R(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),s=n[0],i=n[1];return Object(m.jsxs)("div",{className:"main-home",children:[Object(m.jsxs)("div",{className:"left-home",children:[Object(m.jsx)("img",{className:"logo-home",src:"title-bon-app.png",alt:"BonApp"}),Object(m.jsx)("p",{children:"Add your ingredients"}),Object(m.jsx)(E,{onIngredientInput:function(e){i(e)}}),Object(m.jsx)("button",{className:"find-recipe-btn",onClick:function(){e.history.push({pathname:"/all-recipes",search:new URLSearchParams({ingredients:s}).toString()})},children:"Find your recipe"})]}),Object(m.jsx)(h.b,{className:"fridge-container",to:"/all-recipes",children:Object(m.jsx)("img",{className:"fridge",src:"openingFridge.gif",alt:"fridge opening"})})]})}n(41);function V(e){var t=Object(a.useState)(""),n=Object(d.a)(t,2),s=n[0],i=n[1],c=Object(a.useState)(""),o=Object(d.a)(c,2),j=o[0],b=o[1],f=x(),O=f.isLoggedIn,g=f.setCurrentUser,v=Object(a.useState)(!1),y=Object(d.a)(v,2),N=y[0],C=y[1],k=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p.post("/signin",{email:s,password:j});case 4:n=e.sent,g(n.data.currentUser),C(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),g(null),C(!0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return O?Object(m.jsx)(r.a,{to:"/all-recipes"}):Object(m.jsxs)("form",{className:"form",onSubmit:k,children:[Object(m.jsx)("h1",{className:"title",children:"Sign in"}),!0===N&&Object(m.jsx)("div",{className:"error title",children:"invalid credentials"}),Object(m.jsx)("input",{className:"input",placeholder:"email",id:"email",type:"email",value:s,onChange:function(e){return i(e.target.value)}}),Object(m.jsx)("input",{className:"input",placeholder:"password",id:"password",type:"password",value:j,onChange:function(e){return b(e.target.value)}}),Object(m.jsx)("button",{className:"btn",children:"ok"}),Object(m.jsxs)("p",{className:"parag",children:["No account yet ? please"," ",Object(m.jsx)(h.b,{to:"/signup",className:"linksign",children:"sign up"})]})]})}var A=n(19),Y=(n(91),function(e){Object(N.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={avatar:"",tmpAvatar:"",username:"",email:"",password:"",isError:!1},e.fileInput=s.a.createRef(),e.handleSubmit=function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),(a=new FormData).append("email",e.state.email),a.append("password",e.state.password),a.append("username",e.state.username),e.fileInput.current.files[0]&&a.append("avatar",e.fileInput.current.files[0]),t.prev=6,t.next=9,p.post("/signup",a);case 9:e.props.history.push("/sign-in"),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(6),console.error(t.t0),e.setState({isError:!0});case 16:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){e.setState(Object(A.a)({},t.target.name,t.target.value))},e.handleImage=function(t){e.setState({avatar:t.target.files[0]})},e}return Object(y.a)(n,[{key:"render",value:function(){var e=this.props.userContext.isLoggedIn,t=this.state,n=t.email,a=t.password,s=t.username;t.tmpAvatar;return e?Object(m.jsx)(r.a,{to:"/all-recipes"}):Object(m.jsxs)("form",{className:"form",onSubmit:this.handleSubmit,onChange:this.handleChange,children:[Object(m.jsx)("h1",{className:"title",children:"Sign up"}),!0===this.state.isError&&Object(m.jsx)("div",{className:"error",children:"email already registered, please sign in"}),Object(m.jsx)("input",{className:"input",placeholder:"email",id:"email",type:"email",name:"email",defaultValue:n}),Object(m.jsx)("input",{className:"input",placeholder:"username",id:"username",type:"text",name:"username",defaultValue:s}),Object(m.jsx)("input",{className:"input",placeholder:"password",id:"password",type:"password",name:"password",defaultValue:a}),Object(m.jsxs)("div",{className:"container ",children:[Object(m.jsx)("label",{htmlFor:"",children:"Upload your avatar"}),Object(m.jsx)("input",{ref:this.fileInput,type:"file",name:"avatar",id:"avatar",className:"avatar",onChange:this.handleImage})]}),Object(m.jsx)("button",{className:"btn",children:"ok"}),Object(m.jsxs)("p",{className:"parag",children:["Already a member ? please"," ",Object(m.jsx)(h.b,{to:"/sign-in",className:"linksign",children:"sign in"})]})]})}}]),n}(a.Component)),z=g(Y),H=(n(92),n(93),function(e){Object(N.a)(n,e);var t=Object(C.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"simple-card",children:[Object(m.jsxs)("div",{className:"favorite",children:[!0===this.props.userContext.isLoggedIn&&Object(m.jsx)(D,{handler:this.props.handler,id:this.props.recipe._id}),!1===this.props.userContext.isLoggedIn&&Object(m.jsxs)(h.b,{to:"/sign-in",className:"isNotFavorite",children:[Object(m.jsx)(F.a,{className:"coeur-plein",icon:q.b,size:"2x",color:"#d18110"}),Object(m.jsx)("i",{className:"far fa-heart coeur-vide fa-2x"})]})]}),Object(m.jsxs)(h.b,{to:{pathname:"/all-recipes/"+this.props.recipe._id,state:Object(b.a)(Object(b.a)({},this.props.previousSearchParams),{},{showLinks:this.props.showLinks})},className:"link",children:[Object(m.jsx)("img",{src:this.props.recipe.image,alt:"recipe"}),Object(m.jsx)("h1",{className:"title-simple-card",children:this.props.recipe.title}),Object(m.jsx)("p",{className:"title-difficulty",children:Object(m.jsx)("i",{children:this.props.recipe.category})})]})]})}}]),n}(a.Component)),T=g(H);n(94);function J(e){var t=["Meat","Dessert","Miscellaneous","Pasta","Seafood","Side","Starter","Vegan","Vegetarian","Breakfast"],n=Object(a.useState)(!1),s=Object(d.a)(n,2),i=s[0],c=s[1],r=t.map((function(t){var n;return null===(n=e.state)||void 0===n?void 0:n.categoryFilter.includes(t)}));return Object(a.useEffect)((function(){r=t.map((function(t){var n;return null===(n=e.state)||void 0===n?void 0:n.categoryFilter.includes(t)}))})),Object(m.jsxs)("div",{className:"search-menu",children:[Object(m.jsxs)("div",{className:"search-bar-with-btn",children:[Object(m.jsx)("form",{children:Object(m.jsx)("input",{className:"search-bar",type:"text",placeholder:"Search by name",onChange:e.onNameInput,value:e.state.nameFilter})}),Object(m.jsx)("button",{className:"filter-btn",onClick:function(){c(!i)},children:Object(m.jsx)("i",{className:"fal fa-sliders-v"})})]}),i&&Object(m.jsxs)("div",{className:"filter-menu",children:[Object(m.jsxs)("div",{className:"category-menu",children:[Object(m.jsx)("h3",{children:"Categories"}),Object(m.jsx)("div",{className:"all-categories",children:t.map((function(t,n){return Object(m.jsxs)("span",{className:"one-category",children:[Object(m.jsx)("input",{checked:r[n],type:"checkbox",onChange:function(n){return e.onCategoryInput(n,t)}}),Object(m.jsx)("label",{children:t})]},t)}))})]}),Object(m.jsxs)("div",{className:"ingredients-menu",children:[Object(m.jsx)("h3",{children:"Ingredients"}),Object(m.jsx)(E,{onIngredientInput:e.onIngredientInput,ingredientsFromHome:e.ingredientsFromHome,ingredientsFromState:e.state.ingredientsFilter})]})]}),i&&Object(m.jsx)(h.b,{to:{pathname:"/all-recipes",reset:!0},className:"filter-btn",children:Object(m.jsx)("i",{className:"fas fa-redo"})})]})}var Q=function(e){Object(N.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,e)).onNameInput=function(e){a.setState({nameFilter:e.target.value},(function(){a.fetchData()}))},a.onCategoryInput=function(e,t){var n=Object(S.a)(a.state.categoryFilter);a.state.categoryFilter.includes(t)?n.splice(n.indexOf(t),1):n.push(t),a.setState({categoryFilter:n},(function(){a.fetchData()}))},a.onIngredientInput=function(e){a.setState({ingredientFilter:Object(S.a)(e)},(function(){a.fetchData()}))},a.fetchData=function(){p.get("/all-recipes",{params:{name:a.state.nameFilter,category:a.state.categoryFilter,ingredients:a.state.ingredientFilter}}).then((function(e){a.setState({recipes:e.data})})).catch((function(e){return console.error(e)}))},a.state={recipes:null,nameFilter:null,ingredientFilter:[],categoryFilter:[],searchString:""},a}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(this.props.location.search),n=[""];"string"===typeof t.get("ingredients")&&(n=t.get("ingredients").split(","));var a="",s=[];this.props.location.searchFromOneRecipe&&(n=this.props.location.searchFromOneRecipe.ingredients,a=this.props.location.searchFromOneRecipe.name,s=this.props.location.searchFromOneRecipe.category),this.setState({ingredientFilter:n,nameFilter:a,categoryFilter:s},(function(){return e.fetchData()}))}},{key:"componentDidUpdate",value:function(e){var t,n=this;e!==this.props&&(null===(t=this.props.location)||void 0===t?void 0:t.reset)&&(this.setState({ingredientFilter:[""],nameFilter:"",categoryFilter:[]},(function(){return n.fetchData()})),this.props.location.reset=!1)}},{key:"render",value:function(){var e=this;return this.state.recipes?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(J,{onNameInput:this.onNameInput,onCategoryInput:this.onCategoryInput,onIngredientInput:this.onIngredientInput,ingredientsFromHome:this.state.ingredientFilter,state:this.state}),this.state.recipes.length?Object(m.jsx)("div",{className:"list-recipes",children:this.state.recipes.map((function(t){return Object(m.jsx)("div",{children:Object(m.jsx)(T,{previousSearchParams:{name:e.state.nameFilter,ingredients:e.state.ingredientFilter,category:e.state.categoryFilter},recipe:t,showLinks:!0})},t._id)}))}):Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{children:"There are no recipes matching these criteria"}),Object(m.jsx)(h.b,{to:{pathname:"/all-recipes",reset:!0},children:Object(m.jsx)("i",{className:"far fa-times-circle"})})]})]}):Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{children:"Loading..."}),Object(m.jsx)("i",{className:"fas fa-spinner fa-pulse"})]})}}]),n}(a.Component);n(42);function G(){var e=this,t=Object(a.useState)([]),n=Object(d.a)(t,2),s=n[0],i=n[1],c=x().currentUser;Object(a.useEffect)((function(){r()}),[c]);var r=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.get("/my-recipes/"+c._id);case 3:t=e.sent,i(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.delete("/my-recipes/".concat(t));case 3:r(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.get("/my-recipes/".concat(n,"/edit"));case 3:r(),e.props.history.push("/my-recipes/".concat(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"my-recipes",children:[Object(m.jsx)("h1",{children:"My recipes"}),0===s.length&&Object(m.jsxs)("div",{className:"text",children:[" ","You don't have any recipes yet. Add a recipe !"]}),Object(m.jsx)(h.b,{to:"/profile/my-recipes/create",className:"container",children:Object(m.jsxs)("button",{className:"ingredient-add-button",children:[Object(m.jsx)("i",{className:"fas fa-plus-circle"})," "]})}),Object(m.jsx)("div",{className:"list-my-recipes",children:s.map((function(e){return Object(m.jsxs)("div",{className:"all-recipes",children:[Object(m.jsx)(T,{showLinks:!1,recipe:e}),Object(m.jsxs)("div",{children:[Object(m.jsx)(h.b,{to:"/profile/my-recipes/update/"+e._id,children:Object(m.jsx)(F.a,{icon:q.a,className:"edit",style:{cursor:"pointer"},onClick:function(){return j(e._id)}})}),Object(m.jsx)(F.a,{icon:q.e,className:"trash",style:{cursor:"pointer"},onClick:function(){return o(e._id)}})]})]},e._id)}))})]})}n(95);function K(){var e=x().currentUser,t=Object(a.useState)([]),n=Object(d.a)(t,2),s=n[0],i=n[1];Object(a.useEffect)((function(){c()}),[e]);var c=function(){p.get("/"+(null===e||void 0===e?void 0:e._id)).then((function(e){i(e.data.favorites)})).catch((function(e){return console.error(e)}))};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"My favourites"}),0===s.length&&Object(m.jsxs)("div",{className:"text",children:[" ","You don't have any favourites yet. ",Object(m.jsx)(h.b,{to:"/all-recipes",className:"link-recipe",children:"Add one !"})]}),Object(m.jsx)("div",{className:"list-favorites",children:s.map((function(e){return Object(m.jsx)("div",{className:"all-recipes",children:Object(m.jsx)(T,{showLinks:!1,recipe:e,handler:c})},e._id)}))})]})}n(43);var W=function(e){Object(N.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(v.a)(this,n),console.log(e),(a=t.call(this,e)).handleSubmit=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,s,i,c,r,o,u,d,j,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state,s=n.title,i=n.difficulty,c=n.ingredients,r=n.category,o=n.quantities,u=n.instructions,d=a.state.image.current.files[0],j=a.props.userContext.currentUser._id,console.log("this is user",j),(h=new FormData).append("title",s),h.append("difficulty",i),h.append("ingredients",c),h.append("quantities",o),h.append("category",r),h.append("instructions",u),h.append("image",d),h.append("author",j),e.prev=14,e.next=17,p.post("/recipe/create",h);case 17:a.props.history.push("./"),console.log("this is this props",a.props.history),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(14),console.error(e.t0),a.setState({error:!0});case 25:case"end":return e.stop()}}),e,null,[[14,21]])})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){a.setState(Object(A.a)({},e.target.name,e.target.value))},a.addIngredientBar=function(e){console.log("you are",e),e.preventDefault();var t=Object(S.a)(a.state.ingredients),n=Object(S.a)(a.state.quantities);t.push(a.state.ingredient),n.push(a.state.quantity),a.setState({ingredients:t,ingredient:"",quantities:n,quantity:""})},a.removeIngredientBar=function(e,t){e.preventDefault();var n=Object(S.a)(a.state.ingredients),s=Object(S.a)(a.state.quantities);console.log("avant",n),console.log("index",t),n.splice(t,1),s.splice(t,1),console.log("apres",n),a.setState({ingredients:n,quantities:s})},a.state={title:"",author:"",difficulty:"easy",ingredient:"",ingredients:[],quantities:[],quantity:"",category:"Meat",instructions:"",image:s.a.createRef(),error:!1},a}return Object(y.a)(n,[{key:"render",value:function(){var e=this;return console.log("this is the ingrdients",this.state),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{className:"title",children:"Create your own recipe!"}),Object(m.jsxs)("div",{className:"general-wrap",children:[Object(m.jsxs)("form",{className:"form-wrap bounce-in-top",children:[!0===this.state.error&&Object(m.jsx)("div",{className:"error",children:"Please fill in all the values"}),Object(m.jsx)("input",{name:"title",type:"text",placeholder:"title",value:this.state.title,onChange:this.handleChange}),Object(m.jsxs)("select",{name:"difficulty",value:this.state.difficulty,onChange:this.handleChange,className:"input",children:[Object(m.jsx)("option",{value:"easy",children:"Easy"}),Object(m.jsx)("option",{value:"medium",children:"Medium"}),Object(m.jsx)("option",{value:"difficult",children:"difficult"})]}),Object(m.jsxs)("select",{name:"category",value:this.state.category,onChange:this.handleChange,className:"input",children:[Object(m.jsx)("option",{value:"Meat",children:"Meat"}),Object(m.jsx)("option",{value:"Dessert",children:"Dessert"}),Object(m.jsx)("option",{value:"Miscellaneous",children:"Miscellaneous"}),Object(m.jsx)("option",{value:"Pasta",children:"Pasta"}),Object(m.jsx)("option",{value:"Seafood",children:"Seafood"}),Object(m.jsx)("option",{value:"Side",children:"Side"}),Object(m.jsx)("option",{value:"Starter",children:"Starter"}),Object(m.jsx)("option",{value:"Vegan",children:"Vegan"}),Object(m.jsx)("option",{value:"Vegetarian",children:"Vegetarian"}),Object(m.jsx)("option",{value:"Breakfast",children:"Breakfast"})]}),Object(m.jsxs)("div",{className:"ingredients-creation",children:[Object(m.jsx)("input",{name:"ingredient",type:"text",placeholder:"ingredients",value:this.state.ingredient,onChange:this.handleChange}),Object(m.jsx)("input",{name:"quantity",type:"text",placeholder:"quantities",value:this.state.quantity,onChange:this.handleChange}),Object(m.jsx)("button",{className:"create-button",onClick:this.addIngredientBar,children:"Validate"})]}),Object(m.jsx)("textarea",{className:"instructions-recipe",name:"instructions",type:"text",placeholder:"instructions",value:this.state.instructions,onChange:this.handleChange}),Object(m.jsx)("input",{className:"input-file",ref:this.state.image,name:"image",type:"file"}),Object(m.jsx)("button",{className:"create-button create-ingredients-button",onClick:this.handleSubmit,children:"Create the recipe"})]}),Object(m.jsxs)("div",{className:"info-box",children:[Object(m.jsx)("h1",{children:"Your ingredients!"}),Object(m.jsx)("table",{className:"table",children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{className:"table-title",children:[Object(m.jsx)("th",{children:"Ingredient"}),Object(m.jsx)("th",{children:"Quantity"})]}),this.state.ingredients.map((function(t,n){return Object(m.jsxs)("tr",{className:"ingredients",children:[Object(m.jsx)("td",{children:t},n),Object(m.jsx)("td",{children:e.state.quantities[n]}),Object(m.jsx)("img",{className:"ingredient-image",src:"https://themealdb.com/images/ingredients/"+t+".png",alt:""}),Object(m.jsx)("button",{onClick:function(t){return e.removeIngredientBar(t,n)},children:Object(m.jsx)("i",{className:"fas fa-trash-alt"})})]})}))]})})]})]})]})}}]),n}(a.Component),X=g(W),Z=function(e){Object(N.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(v.a)(this,n),console.log(e),(a=t.call(this,e)).componentDidMount=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.get("/all-recipes/"+a.props.match.params.id);case 3:t=e.sent,console.log("hoaoaoaoao",t),a.setState({title:t.data.title,difficulty:t.data.difficulty,ingredient:t.data.ingredient,ingredients:t.data.ingredients,quantities:t.data.quantities,quantity:t.data.quantity,category:t.data.category,instructions:t.data.instructions,image:t.data.image}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),a.handleSubmit=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,s,i,c,r,o,u,d,j,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state,s=n.title,n.author,i=n.difficulty,c=n.ingredients,r=n.category,o=n.quantities,u=n.instructions,d=n.image,j=new FormData,h=a.state.imageInput.current.files[0]||d,j.append("title",s),j.append("difficulty",i),j.append("ingredients",c),j.append("quantities",o),j.append("category",r),j.append("instructions",u),j.append("image",h),e.prev=11,e.next=14,p.patch("/recipe/update/"+a.props.match.params.id,j);case 14:a.props.history.push("/profile/my-recipes"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[11,17]])})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){a.setState(Object(A.a)({},e.target.name,e.target.value))},a.addIngredientBar=function(e){console.log("you are",e),e.preventDefault();var t=Object(S.a)(a.state.ingredients),n=Object(S.a)(a.state.quantities);t.push(a.state.ingredient),n.push(a.state.quantity),a.setState({ingredients:t,ingredient:"",quantities:n,quantity:""})},a.removeIngredientBar=function(e,t){e.preventDefault();var n=Object(S.a)(a.state.ingredients),s=Object(S.a)(a.state.quantities);console.log("avant",n),console.log("index",t),n.splice(t,1),s.splice(t,1),console.log("apres",n),a.setState({ingredients:n,quantities:s})},a.state={title:"",author:a.props.userContext.currentUser._id,difficulty:"",ingredient:"",ingredients:[],quantities:[],quantity:"",category:"",instructions:"",image:"",imageInput:s.a.createRef()},a}return Object(y.a)(n,[{key:"render",value:function(){var e=this;return console.log("this is the ingrdients",this.props.match.params.id),console.log("state",this.state),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{className:"title",children:"Update your recipe!"}),Object(m.jsxs)("div",{className:"general-wrap",children:[Object(m.jsxs)("form",{className:"form-wrap bounce-in-top",children:[Object(m.jsx)("input",{name:"title",type:"text",placeholder:"title",value:this.state.title,onChange:this.handleChange}),Object(m.jsxs)("select",{name:"difficulty",value:this.state.difficulty,onChange:this.handleChange,className:"input",children:[Object(m.jsx)("option",{value:"easy",children:"Easy"}),Object(m.jsx)("option",{value:"medium",children:"Medium"}),Object(m.jsx)("option",{value:"difficult",children:"difficult"})]}),Object(m.jsxs)("select",{name:"category",value:this.state.category,onChange:this.handleChange,className:"input",children:[Object(m.jsx)("option",{value:"Meat",children:"Meat"}),Object(m.jsx)("option",{value:"Dessert",children:"Dessert"}),Object(m.jsx)("option",{value:"Miscellaneous",children:"Miscellaneous"}),Object(m.jsx)("option",{value:"Pasta",children:"Pasta"}),Object(m.jsx)("option",{value:"Seafood",children:"Seafood"}),Object(m.jsx)("option",{value:"Side",children:"Side"}),Object(m.jsx)("option",{value:"Starter",children:"Starter"}),Object(m.jsx)("option",{value:"Vegan",children:"Vegan"}),Object(m.jsx)("option",{value:"Vegetarian",children:"Vegetarian"}),Object(m.jsx)("option",{value:"Breakfast",children:"Breakfast"})]}),Object(m.jsxs)("div",{className:"ingredients-creation",children:[Object(m.jsx)("input",{name:"ingredient",type:"text",placeholder:"ingredients",value:this.state.ingredient,onChange:this.handleChange}),Object(m.jsx)("input",{name:"quantity",type:"text",placeholder:"quantities",value:this.state.quantity,onChange:this.handleChange}),Object(m.jsx)("button",{className:"create-button",onClick:this.addIngredientBar,children:"Validate"})]}),Object(m.jsx)("textarea",{className:"instructions-recipe",name:"instructions",type:"text",placeholder:"instructions",value:this.state.instructions,onChange:this.handleChange}),Object(m.jsx)("input",{className:"input-file",ref:this.state.imageInput,name:"image",type:"file"}),Object(m.jsx)("button",{className:"create-button create-ingredients-button",onClick:this.handleSubmit,children:"Update the recipe"})]}),Object(m.jsxs)("div",{className:"info-box",children:[Object(m.jsx)("h1",{children:"Your ingredients!"}),Object(m.jsx)("table",{className:"table",children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{className:"table-title",children:[Object(m.jsx)("th",{children:"Ingredient"}),Object(m.jsx)("th",{children:"Quantity"})]}),this.state.ingredients.map((function(t,n){return Object(m.jsxs)("tr",{className:"ingredients",children:[Object(m.jsx)("td",{children:t},n),Object(m.jsx)("td",{children:e.state.quantities[n]}),Object(m.jsx)("img",{className:"ingredient-image",src:"https://themealdb.com/images/ingredients/"+t+".png",alt:""}),Object(m.jsx)("button",{onClick:function(t){return e.removeIngredientBar(t,n)},children:Object(m.jsx)("i",{className:"fas fa-trash-alt"})})]})}))]})})]})]})]})}}]),n}(a.Component),$=g(Z),ee=n(48),te=["component"],ne=function(e){var t=e.component,n=Object(ee.a)(e,te),a=x(),s=a.isLoggedIn;return a.isLoading?Object(m.jsx)("div",{children:"Loading..."}):s?Object(m.jsx)(r.b,Object(b.a)(Object(b.a)({},n),{},{render:function(e){return Object(m.jsx)(t,Object(b.a)({},e))}})):Object(m.jsx)(r.a,{to:"/sign-in"})};var ae=function(){return Object(m.jsx)(O,{children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(P,{}),Object(m.jsxs)(r.d,{children:[Object(m.jsx)(r.b,{exact:!0,path:"/",component:R}),Object(m.jsx)(r.b,{path:"/sign-in",component:V}),Object(m.jsx)(r.b,{path:"/signup",component:z}),Object(m.jsx)(ne,{exact:!0,path:"/profile/my-recipes",component:G}),Object(m.jsx)(ne,{path:"/profile/my-recipes/create",component:X}),Object(m.jsx)(ne,{path:"/profile/my-recipes/update/:id",component:$}),Object(m.jsx)(ne,{path:"/profile/my-favourites",component:K}),Object(m.jsx)(r.b,{path:"/all-recipes/:id",component:M}),Object(m.jsx)(r.b,{exact:!0,path:"/all-recipes",component:Q}),Object(m.jsx)(r.b,{path:"*",component:_})]})]})})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,97)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))};c.a.render(Object(m.jsx)(h.a,{children:Object(m.jsx)(O,{children:Object(m.jsx)(ae,{})})}),document.getElementById("root")),se()}},[[96,1,2]]]);
//# sourceMappingURL=main.22ab114c.chunk.js.map